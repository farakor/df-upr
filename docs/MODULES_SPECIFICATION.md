# 🎯 Спецификация модулей

## 📋 Обзор

Данный документ содержит детальное описание всех модулей системы DF-UPR, их функционала, взаимосвязей и технических требований.

## 🏗 Архитектура модулей

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Dashboard  │    │ Номенклатура│    │ Рецептуры   │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    Меню     │◄──►│    Склад    │◄──►│Инвентаризац.│
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Продажи   │    │   Отчеты    │    │  Настройки  │
└─────────────┘    └─────────────┘    └─────────────┘
```

---

## 📊 1. Дашборд

### 🎯 Назначение
Центральная панель управления с ключевыми показателями эффективности и оперативной информацией по всем точкам сети.

### 🔧 Функциональные требования

#### 1.1 Общая статистика
- **Выручка за период** - текущий день/неделя/месяц с сравнением с предыдущим периодом
- **Количество продаж** - общее количество чеков и средний чек
- **Топ продаваемых блюд** - рейтинг по количеству и выручке
- **Остатки товаров** - общая стоимость остатков по всем складам

#### 1.2 Критические уведомления
- **Низкие остатки** - товары ниже минимального порога
- **Просроченные товары** - товары с истекающим сроком годности
- **Недостачи** - результаты последних инвентаризаций
- **Системные события** - ошибки, предупреждения

#### 1.3 Графики и диаграммы
- **График продаж** - динамика по дням/часам
- **Структура выручки** - по категориям блюд
- **ABC анализ** - распределение товаров по группам
- **Рентабельность** - маржинальность по блюдам

#### 1.4 Быстрые действия
- **Создать продажу** - быстрый переход к кассе
- **Добавить поступление** - быстрое оформление прихода
- **Провести инвентаризацию** - запуск процедуры
- **Создать отчет** - генерация популярных отчетов

### 🛠 Технические требования
- Автообновление данных каждые 30 секунд
- Кеширование тяжелых запросов на 5 минут
- Адаптивная верстка для планшетов
- Возможность настройки виджетов пользователем

### 📱 UI/UX требования
- Карточный дизайн для метрик
- Цветовая индикация критических значений
- Интерактивные графики с drill-down
- Быстрые фильтры по периодам и точкам

---

## 📦 2. Номенклатура

### 🎯 Назначение
Управление справочником товаров, их характеристиками, категориями и единицами измерения.

### 🔧 Функциональные требования

#### 2.1 Управление товарами
- **CRUD операции** - создание, чтение, обновление, удаление товаров
- **Массовые операции** - групповое изменение категорий, статусов
- **Дублирование товаров** - создание на основе существующего
- **История изменений** - аудит всех изменений товара

#### 2.2 Характеристики товаров
- **Основные данные** - название, артикул, штрихкод
- **Категоризация** - привязка к категориям (древовидная структура)
- **Единицы измерения** - основная и дополнительные единицы
- **Условия хранения** - температурный режим, влажность
- **Сроки годности** - количество дней, особые условия

#### 2.3 Категории товаров
- **Иерархическая структура** - неограниченная вложенность
- **Настройки категорий** - изображения, описания, сортировка
- **Массовые операции** - перенос товаров между категориями
- **Аналитика по категориям** - статистика продаж и остатков

#### 2.4 Импорт/экспорт данных
- **Импорт из Excel** - загрузка товаров из файла с валидацией
- **Экспорт в Excel** - выгрузка с фильтрами и настройками
- **Шаблоны импорта** - предустановленные форматы файлов
- **Логи импорта** - детальная информация об ошибках

#### 2.5 Поиск и фильтрация
- **Полнотекстовый поиск** - по названию, артикулу, штрихкоду
- **Фильтры** - по категориям, активности, наличию остатков
- **Сортировка** - по различным полям с сохранением настроек
- **Избранное** - закладки на часто используемые товары

### 🛠 Технические требования
- Индексы для быстрого поиска по названию и артикулу
- Валидация уникальности артикулов и штрихкодов
- Soft delete для сохранения истории
- API для интеграции с внешними системами

### 📱 UI/UX требования
- Табличное представление с возможностью настройки колонок
- Быстрое редактирование в таблице (inline editing)
- Предпросмотр изображений товаров
- Drag & drop для изменения категорий

---

## 👨‍🍳 3. Рецептуры

### 🎯 Назначение
Создание и управление технологическими картами блюд с автоматическим расчетом себестоимости и контролем расхода ингредиентов.

### 🔧 Функциональные требования

#### 3.1 Управление рецептами
- **Создание рецептов** - пошаговое добавление ингредиентов
- **Технологические карты** - детальные инструкции приготовления
- **Версионирование** - сохранение истории изменений рецептов
- **Клонирование** - создание вариаций существующих рецептов

#### 3.2 Ингредиенты и нормы расхода
- **Состав рецепта** - список ингредиентов с количествами
- **Единицы измерения** - поддержка различных единиц для каждого ингредиента
- **Нормы потерь** - учет потерь при обработке продуктов
- **Замены ингредиентов** - альтернативные компоненты

#### 3.3 Калькуляция себестоимости
- **Автоматический расчет** - на основе текущих цен ингредиентов
- **История цен** - отслеживание изменения себестоимости
- **Сценарии расчета** - различные варианты ценообразования
- **Анализ рентабельности** - сравнение себестоимости и цены продажи

#### 3.4 Масштабирование рецептов
- **Пересчет порций** - автоматическое изменение количества ингредиентов
- **Производственные партии** - расчет для больших объемов
- **Оптимизация закупок** - рекомендации по количеству ингредиентов
- **Планирование производства** - прогноз потребности в продуктах

#### 3.5 Контроль качества
- **Стандарты приготовления** - время, температура, последовательность
- **Фото готовых блюд** - эталонные изображения
- **Чек-листы** - контрольные точки процесса
- **Оценка качества** - система оценок и комментариев

### 🛠 Технические требования
- Автоматический пересчет себестоимости при изменении цен
- Валидация наличия ингредиентов на складе
- Интеграция с модулем продаж для списания по рецептурам
- Экспорт технологических карт в PDF

### 📱 UI/UX требования
- Визуальный конструктор рецептов
- Калькулятор с режимом реального времени
- Галерея изображений блюд
- Печатные формы технологических карт

---

## 🍽 4. Меню

### 🎯 Назначение
Управление ассортиментом блюд по точкам питания с контролем доступности и ценообразованием.

### 🔧 Функциональные требования

#### 4.1 Структура меню
- **Категории блюд** - организация меню по разделам
- **Позиции меню** - привязка к рецептурам с ценами
- **Сезонное меню** - временные ограничения доступности
- **Специальные предложения** - акции и скидки

#### 4.2 Управление по точкам
- **Индивидуальные меню** - различный ассортимент по точкам
- **Локальные цены** - переопределение цен для конкретных точек
- **Доступность блюд** - контроль наличия ингредиентов
- **Синхронизация** - копирование меню между точками

#### 4.3 Ценообразование
- **Базовые цены** - централизованное управление ценами
- **Наценки** - процентные и фиксированные надбавки
- **Динамическое ценообразование** - изменение цен в зависимости от времени
- **История цен** - отслеживание изменений

#### 4.4 Контроль доступности
- **Автоматический контроль** - проверка наличия ингредиентов
- **Ручное управление** - временное отключение позиций
- **Уведомления** - предупреждения о недоступности
- **Замещающие блюда** - предложение альтернатив

### 🛠 Технические требования
- Автоматическое обновление доступности при изменении остатков
- API для интеграции с кассовыми системами
- Кеширование меню для быстрого доступа
- Поддержка мультиязычности

### 📱 UI/UX требования
- Визуальное представление меню с фотографиями
- Быстрое переключение между точками
- Индикаторы доступности блюд
- Мобильная версия для официантов

---

## 🏪 5. Склад

### 🎯 Назначение
Полный учет движения товаров от поставщиков до списания с контролем остатков и автоматизацией складских операций.

### 🔧 Функциональные требования

#### 5.1 Складские операции
- **Приход товара** - оформление поставок от поставщиков
- **Перемещения** - трансферы между складами и точками
- **Списания** - учет порчи, брака, производственного использования
- **Инвентаризация** - сверка учетных и фактических остатков

#### 5.2 Документооборот
- **Типы документов** - приходные накладные, требования, акты списания
- **Нумерация** - автоматическая генерация номеров документов
- **Статусы документов** - черновик, проведен, отменен
- **Печатные формы** - стандартизированные документы

#### 5.3 Контроль остатков
- **Текущие остатки** - количество и стоимость по всем складам
- **Минимальные остатки** - настройка критических уровней
- **Резервирование** - блокировка товаров под заказы
- **Партионный учет** - отслеживание сроков годности по партиям

#### 5.4 Автоматизация процессов
- **Автоматические списания** - по рецептурам при продажах
- **Уведомления** - о низких остатках и истекающих сроках
- **Планирование закупок** - рекомендации по заказам
- **Интеграция с поставщиками** - электронный документооборот

#### 5.5 Аналитика складских операций
- **Оборачиваемость товаров** - анализ скорости движения
- **ABC/XYZ анализ** - классификация товаров по важности
- **Анализ потерь** - контроль списаний и порчи
- **Эффективность складов** - сравнительный анализ точек

### 🛠 Технические требования
- FIFO/LIFO методы списания товаров
- Автоматический расчет средневзвешенной стоимости
- Блокировки для предотвращения отрицательных остатков
- Интеграция со сканерами штрихкодов

### 📱 UI/UX требования
- Быстрое оформление документов
- Сканирование штрихкодов через камеру
- Мобильная версия для складских операций
- Визуальные индикаторы состояния товаров

---

## 📋 6. Инвентаризация

### 🎯 Назначение
Периодическая сверка фактических и учетных остатков с автоматическим выявлением недостач и излишков.

### 🔧 Функциональные требования

#### 6.1 Планирование инвентаризации
- **Календарь инвентаризаций** - планирование регулярных проверок
- **Типы инвентаризации** - полная, выборочная, по категориям
- **Назначение ответственных** - распределение зон ответственности
- **Подготовка документов** - генерация инвентаризационных ведомостей

#### 6.2 Проведение инвентаризации
- **Мобильное приложение** - для сбора данных в реальном времени
- **Сканирование штрихкодов** - быстрый ввод товаров
- **Фотофиксация** - документирование состояния товаров
- **Командная работа** - распределение задач между сотрудниками

#### 6.3 Обработка результатов
- **Автоматическое сравнение** - учетных и фактических данных
- **Выявление расхождений** - недостачи и излишки
- **Анализ причин** - категоризация типов расхождений
- **Создание корректировочных документов** - автоматическое оформление

#### 6.4 Отчетность по инвентаризации
- **Инвентаризационные ведомости** - детальные отчеты по товарам
- **Сводные отчеты** - общие результаты по складу
- **Анализ динамики** - сравнение с предыдущими инвентаризациями
- **Рекомендации** - предложения по улучшению учета

### 🛠 Технические требования
- Блокировка складских операций во время инвентаризации
- Автоматическое создание документов корректировки
- Интеграция с мобильными устройствами
- Экспорт результатов в различные форматы

### 📱 UI/UX требования
- Интуитивный интерфейс для мобильных устройств
- Прогресс-бар выполнения инвентаризации
- Цветовая индикация расхождений
- Быстрый поиск товаров по штрихкоду

---

## 💰 7. Продажи

### 🎯 Назначение
Учет реализации готовых блюд с автоматическим списанием ингредиентов по рецептурам и формированием отчетности.

### 🔧 Функциональные требования

#### 7.1 Кассовые операции
- **Оформление продаж** - создание чеков с позициями меню
- **Способы оплаты** - наличные, карты, смешанная оплата
- **Скидки и акции** - применение различных типов скидок
- **Возвраты и отмены** - обработка возвратных операций

#### 7.2 Интеграция с рецептурами
- **Автоматическое списание** - ингредиентов по рецептурам
- **Контроль доступности** - проверка наличия ингредиентов
- **Пересчет себестоимости** - актуальная калькуляция при продаже
- **Логирование производства** - учет приготовленных блюд

#### 7.3 Аналитика продаж
- **Статистика по периодам** - дневная, недельная, месячная отчетность
- **Популярность блюд** - рейтинги по количеству и выручке
- **Анализ по времени** - пиковые часы и дни
- **Сравнительная аналитика** - между точками и периодами

#### 7.4 Управление персоналом
- **Учет кассиров** - привязка продаж к сотрудникам
- **Смены и Z-отчеты** - контроль кассовых операций
- **KPI сотрудников** - показатели эффективности
- **Мотивационные программы** - бонусы и премии

### 🛠 Технические требования
- Интеграция с фискальными регистраторами
- Синхронизация с внешними кассовыми системами
- Резервное копирование данных продаж
- API для мобильных приложений

### 📱 UI/UX требования
- Быстрый интерфейс кассира
- Сенсорное управление для планшетов
- Визуальное меню с фотографиями
- Быстрые кнопки для популярных блюд

---

## 📈 8. Отчеты

### 🎯 Назначение
Комплексная аналитическая система для принятия управленческих решений на основе данных всех модулей системы.

### 🔧 Функциональные требования

#### 8.1 Стандартные отчеты
- **Оборотно-сальдовые ведомости** - движение товаров по складам
- **Отчеты по продажам** - детализация по периодам и точкам
- **Анализ рентабельности** - маржинальность блюд и категорий
- **Отчеты по персоналу** - эффективность сотрудников

#### 8.2 Аналитические отчеты
- **ABC/XYZ анализ** - классификация товаров по критериям
- **Анализ трендов** - динамика показателей во времени
- **Сезонный анализ** - влияние сезонности на продажи
- **Корреляционный анализ** - взаимосвязи между показателями

#### 8.3 Конструктор отчетов
- **Визуальный редактор** - создание отчетов без программирования
- **Настраиваемые фильтры** - гибкая фильтрация данных
- **Различные форматы** - таблицы, графики, диаграммы
- **Сохранение шаблонов** - повторное использование настроек

#### 8.4 Автоматизация отчетности
- **Расписание отчетов** - автоматическая генерация по расписанию
- **Email рассылка** - отправка отчетов заинтересованным лицам
- **Уведомления** - алерты при достижении пороговых значений
- **Архивирование** - сохранение исторических данных

#### 8.5 Экспорт и интеграция
- **Множественные форматы** - Excel, PDF, CSV, JSON
- **API для внешних систем** - интеграция с BI-системами
- **Печатные формы** - оптимизированные для печати отчеты
- **Мобильные отчеты** - адаптированные для мобильных устройств

### 🛠 Технические требования
- Оптимизированные запросы для больших объемов данных
- Кеширование тяжелых отчетов
- Параллельная обработка для сложных вычислений
- Масштабируемая архитектура для роста данных

### 📱 UI/UX требования
- Интерактивные дашборды
- Drill-down навигация по данным
- Настраиваемые виджеты
- Адаптивный дизайн для всех устройств

---

## ⚙️ 9. Настройки

### 🎯 Назначение
Администрирование системы, управление пользователями, настройка бизнес-процессов и интеграций.

### 🔧 Функциональные требования

#### 9.1 Управление пользователями
- **Создание аккаунтов** - регистрация новых пользователей
- **Роли и права** - гибкая система разграничения доступа
- **Профили пользователей** - персональные настройки и данные
- **Аудит действий** - логирование активности пользователей

#### 9.2 Организационная структура
- **Управление складами** - создание и настройка точек
- **Поставщики** - справочник контрагентов
- **Сотрудники** - кадровая информация
- **Подразделения** - организационная иерархия

#### 9.3 Справочники системы
- **Единицы измерения** - настройка и конвертация
- **Категории товаров** - иерархическая структура
- **Налоги и сборы** - настройка налогообложения
- **Валюты** - поддержка множественных валют

#### 9.4 Бизнес-процессы
- **Настройка документооборота** - шаблоны и маршруты согласования
- **Автоматизация операций** - правила и триггеры
- **Уведомления** - настройка алертов и рассылок
- **Интеграции** - подключение внешних систем

#### 9.5 Системное администрирование
- **Резервное копирование** - настройка и мониторинг бэкапов
- **Мониторинг производительности** - контроль системных ресурсов
- **Логи системы** - просмотр и анализ системных событий
- **Обновления** - управление версиями системы

### 🛠 Технические требования
- Централизованное управление конфигурацией
- Валидация настроек перед применением
- Откат изменений при ошибках
- Аудит всех изменений настроек

### 📱 UI/UX требования
- Структурированное меню настроек
- Мастера для сложных настроек
- Предварительный просмотр изменений
- Контекстная справка по настройкам

---

## 🔗 Взаимосвязи модулей

### Основные потоки данных:

1. **Номенклатура → Рецептуры** - товары используются как ингредиенты
2. **Рецептуры → Меню** - блюда создаются на основе рецептов
3. **Номенклатура → Склад** - товары поступают и движутся по складам
4. **Меню → Продажи** - позиции меню продаются покупателям
5. **Продажи → Склад** - автоматическое списание ингредиентов
6. **Склад → Инвентаризация** - проверка фактических остатков
7. **Все модули → Отчеты** - данные для аналитики
8. **Все модули → Дашборд** - агрегированная информация

### Критические зависимости:

- **Продажи зависят от наличия товаров на складе**
- **Рецептуры влияют на себестоимость блюд в меню**
- **Инвентаризация корректирует данные склада**
- **Настройки влияют на работу всех модулей**

Эта спецификация обеспечивает полное понимание функционала каждого модуля и их взаимодействия в рамках системы DF-UPR.
